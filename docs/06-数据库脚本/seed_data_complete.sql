-- ============================================
-- 文字之境 - 完整种子数据脚本
-- 版本: v1.0
-- 创建日期: 2025-10-27
-- 说明: 包含加密密码的完整测试数据
-- 统一密码: 123456 (已使用 bcrypt 加密)
-- ============================================

USE `ai_xsread`;

-- 清理旧数据（可选，如果需要重新导入）
-- DELETE FROM reading_history;
-- DELETE FROM reading_progress;
-- DELETE FROM bookshelf;
-- DELETE FROM user_likes;
-- DELETE FROM comments;
-- DELETE FROM chapters;
-- DELETE FROM novels;
-- DELETE FROM categories;
-- DELETE FROM users;

-- ============================================
-- 1. 插入分类数据
-- ============================================
INSERT INTO `categories` (`id`, `name`, `icon`, `description`, `novel_count`, `sort_order`) VALUES
(101, '都市言情', '🏙️', '现代都市背景的浪漫爱情故事', 0, 1),
(102, '古风穿越', '🏯', '穿越时空的古代言情故事', 0, 2),
(103, '玄幻修仙', '⚔️', '修仙练功、斗智斗勇的奇幻世界', 0, 3),
(104, '悬疑推理', '🔍', '扣人心弦的悬疑推理故事', 0, 4),
(105, '科幻未来', '🚀', '科技与未来世界的想象', 0, 5),
(106, '青春校园', '📚', '校园生活与青春成长故事', 0, 6)
ON DUPLICATE KEY UPDATE name=VALUES(name);

-- ============================================
-- 2. 插入测试用户
-- 密码: 123456 (bcrypt加密后)
-- ============================================
INSERT INTO `users` (
  `username`, `email`, `password`, `nickname`, `avatar`, 
  `gender`, `birthday`, `bio`, `role`, `status`
) VALUES
-- 普通用户
(
  'reader001', 
  'reader001@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '温柔读者', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=reader001', 
  1, '1995-05-20', '喜欢阅读温柔的故事', 'user', 1
),
(
  'reader002', 
  'reader002@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '书虫小姐', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=reader002', 
  1, '1998-08-15', '每天都要看小说', 'user', 1
),
(
  'reader003', 
  'reader003@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '追文少女', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=reader003', 
  1, '1997-03-10', '沉迷小说无法自拔', 'user', 1
),
-- 作者用户
(
  'author001', 
  'author001@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '温柔笔触', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=author001', 
  1, '1990-06-12', '专注都市言情创作', 'author', 1
),
(
  'author002', 
  'author002@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '墨染流年', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=author002', 
  1, '1988-09-25', '古风穿越作者', 'author', 1
),
(
  'author003', 
  'author003@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '悬疑女王', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=author003', 
  1, '1992-11-08', '悬疑推理爱好者', 'author', 1
),
-- 测试管理员
(
  'admin', 
  'admin@example.com', 
  '$2b$10$YQ7Zv5K5xG0mH5xJ5xK5xO5xL5xM5xN5xO5xP5xQ5xR5xS5xT5xU', 
  '管理员', 
  'https://api.dicebear.com/7.x/avataaars/svg?seed=admin', 
  2, '1990-01-01', '系统管理员', 'admin', 1
)
ON DUPLICATE KEY UPDATE username=VALUES(username);

-- ============================================
-- 3. 插入测试小说
-- ============================================
INSERT INTO `novels` (
  `title`, `author`, `author_id`, `category_id`, `cover`, `description`, 
  `word_count`, `chapter_count`, `status`, `views`, `likes`, `collections`, 
  `rating`, `rating_count`, `is_recommended`, `is_hot`, 
  `last_chapter_title`, `last_update_time`, `published_at`
) VALUES
-- 都市言情
(
  '时光里的温柔相遇',
  '温柔笔触', 4, 101,
  'https://picsum.photos/seed/novel1/400/600',
  '那年春天，我在图书馆的角落遇见了他。阳光透过窗棂洒在他的书页上，恰好照亮了我的心房。这是一个关于相遇、成长和爱情的温柔故事。从青涩的校园时光，到步入社会的磨砺，我们一起经历了太多。误会、分离、重逢，每一个转折都让这份感情更加珍贵。',
  128000, 50, 1, 15600, 2300, 890, 4.8, 234, 1, 1,
  '第五十章：春暖花开', NOW(), DATE_SUB(NOW(), INTERVAL 30 DAY)
),
(
  '总裁的隐婚甜妻',
  '温柔笔触', 4, 101,
  'https://picsum.photos/seed/novel2/400/600',
  '一场意外的婚姻，让我成为了冷面总裁的隐婚妻子。本以为这只是一场交易，却没想到在日复一日的相处中，冰冷的心也会融化。办公室里的他冷酷无情，回到家中的他温柔体贴。这个男人，到底藏着多少秘密？',
  156000, 60, 1, 23400, 3200, 1250, 4.9, 456, 1, 1,
  '第六十章：真相大白', NOW(), DATE_SUB(NOW(), INTERVAL 45 DAY)
),
(
  '星光璀璨遇见你',
  '温柔笔触', 4, 101,
  'https://picsum.photos/seed/novel3/400/600',
  '她是圈内新晋小花，他是顶流男神。一次意外的合作，让两颗星星产生了交集。镁光灯下的爱情来得猝不及防，却也格外真挚。面对外界的质疑和压力，他们能否守护这份感情？',
  89000, 35, 0, 12300, 1800, 670, 4.7, 189, 0, 1,
  '第三十五章：星光下的告白', NOW(), DATE_SUB(NOW(), INTERVAL 15 DAY)
),
-- 古风穿越
(
  '穿越之嫡女风华',
  '墨染流年', 5, 102,
  'https://picsum.photos/seed/novel4/400/600',
  '一朝穿越，她从现代职场精英变成了相府嫡女。面对宅斗、朝堂纷争，凭借现代智慧，她步步为营。更让她意想不到的是，那位传说中的冷面王爷，竟对她情有独钟。且看她如何在古代谱写一曲华丽的人生乐章。',
  245000, 98, 1, 45600, 5600, 2300, 4.9, 678, 1, 1,
  '第九十八章：凤仪天下', NOW(), DATE_SUB(NOW(), INTERVAL 60 DAY)
),
(
  '锦绣良缘：王爷的小娇妻',
  '墨染流年', 5, 102,
  'https://picsum.photos/seed/novel5/400/600',
  '她本是21世纪的设计师，一场意外穿越到了古代。机缘巧合下嫁给了英俊潇洒的王爷，从此开启了一段甜蜜温馨的古代生活。绣花、做糕点、设计新式服装，凭借现代理念，她在古代闯出了一番天地。',
  167000, 67, 1, 28900, 3900, 1560, 4.8, 345, 1, 1,
  '第六十七章：花好月圆', NOW(), DATE_SUB(NOW(), INTERVAL 40 DAY)
),
-- 玄幻修仙
(
  '九天仙缘',
  '墨染流年', 5, 103,
  'https://picsum.photos/seed/novel6/400/600',
  '她本是现代孤女，意外穿越到修仙世界。从一个不能修炼的废材，到拥有罕见灵根的天才，她的修仙之路充满传奇。更让人惊讶的是，那位仙界第一美男，竟是她前世的道侣。三生石前的约定，这一世能否兑现？',
  189000, 75, 0, 34500, 4200, 1780, 4.7, 421, 0, 1,
  '第七十五章：破境飞升', NOW(), DATE_SUB(NOW(), INTERVAL 20 DAY)
),
-- 悬疑推理
(
  '午夜惊魂：心理医生手札',
  '悬疑女王', 6, 104,
  'https://picsum.photos/seed/novel7/400/600',
  '作为一名心理医生，我见过太多扭曲的灵魂。但这次，当我接诊一位声称能看见鬼魂的患者时，一系列离奇事件接踵而至。每个午夜，都会有一个神秘电话打来，诉说着二十年前的惊天秘密。真相究竟是什么？',
  134000, 53, 1, 19800, 2600, 1120, 4.9, 312, 1, 1,
  '第五十三章：真相浮出水面', NOW(), DATE_SUB(NOW(), INTERVAL 25 DAY)
),
(
  '密室之谜',
  '悬疑女王', 6, 104,
  'https://picsum.photos/seed/novel8/400/600',
  '八个互不相识的人，被困在一座孤岛的别墅中。每过一个小时，就会有一人离奇死亡。是谁在背后操控这一切？他们之间又有什么不为人知的联系？一场智力与心理的较量就此展开。',
  112000, 44, 0, 16700, 2100, 890, 4.8, 267, 0, 1,
  '第四十四章：破解密码', NOW(), DATE_SUB(NOW(), INTERVAL 18 DAY)
),
-- 青春校园
(
  '那些年，我们追过的梦想',
  '温柔笔触', 4, 106,
  'https://picsum.photos/seed/novel9/400/600',
  '高中三年，我们一起奋斗，一起欢笑，一起哭泣。篮球场上的挥汗如雨，教室里的奋笔疾书，放学后的漫步校园。青春就是这样，有遗憾也有美好，有离别也有重逢。多年后再回首，你还记得那些年我们一起追过的梦想吗？',
  98000, 39, 1, 21300, 3100, 1340, 4.7, 298, 1, 0,
  '第三十九章：毕业季', NOW(), DATE_SUB(NOW(), INTERVAL 10 DAY)
),
(
  '校草的小甜饼',
  '温柔笔触', 4, 106,
  'https://picsum.photos/seed/novel10/400/600',
  '转学第一天，我就惹上了学校的大魔王。他是全校女生心中的白月光，冷酷、高傲、不近人情。可是为什么，他总是盯着我看？还总是出现在我身边？等等，这个别扭的家伙，该不会是喜欢上我了吧？',
  145000, 58, 1, 32100, 4500, 1890, 4.9, 523, 1, 1,
  '第五十八章：表白大作战', NOW(), DATE_SUB(NOW(), INTERVAL 35 DAY)
)
ON DUPLICATE KEY UPDATE title=VALUES(title);

-- ============================================
-- 4. 插入测试章节（为每本小说添加5章）
-- ============================================
-- 小说1的章节
INSERT INTO `chapters` (
  `novel_id`, `chapter_number`, `title`, `content`, `word_count`, `is_free`
) VALUES
(1, 1, '第一章：初遇', '春天的图书馆总是充满了阳光的味道。我抱着一摞书走进阅览室，却不小心撞到了一个人。"对不起！"我连忙道歉，抬起头，却看见了一双深邃的眼睛...', 2560, 1),
(1, 2, '第二章：再见', '那之后，我们经常在图书馆相遇。他总是坐在窗边，阳光洒在他的侧脸上。我偷偷观察他，却不知道，他也在看着我...', 2780, 1),
(1, 3, '第三章：心动', '樱花盛开的季节，他约我一起去赏花。樱花树下，他突然转过身来，认真地看着我："我想和你在一起。"那一刻，整个世界都安静了...', 2910, 0),
(1, 4, '第四章：相恋', '我们在一起了。每天放学后一起散步，周末一起去看电影。那段时光，简单却美好。我们约定，要一起走过四季...', 2650, 0),
(1, 5, '第五章：考验', '大学毕业，我们面临着人生的选择。他要去北京发展，而我想留在家乡。异地恋的考验摆在面前，我们能坚持下去吗？...', 2890, 0);

-- 小说2的章节
INSERT INTO `chapters` (
  `novel_id`, `chapter_number`, `title`, `content`, `word_count`, `is_free`
) VALUES
(2, 1, '第一章：契约', '婚礼现场，我穿着洁白的婚纱，嫁给了这个陌生的男人。他叫顾景深，是商界传奇。而我，只是他商业联姻的筹码...', 2600, 1),
(2, 2, '第二章：冷战', '婚后的生活并不如想象中那样。他每天早出晚归，我们像两个陌生人住在同一个屋檐下。也许，这就是豪门的婚姻...', 2750, 1),
(2, 3, '第三章：转折', '那天晚上，他醉酒回家。我第一次看见他脆弱的一面。他说："你知道吗？我也很孤独..."那一刻，我的心软了...', 2820, 0),
(2, 4, '第四章：温情', '他开始主动和我说话，陪我吃饭，甚至带我参加宴会。慢慢地，我发现这个冷酷的男人，其实也有温柔的一面...', 2680, 0),
(2, 5, '第五章：危机', '就在我以为一切都在变好的时候，一个女人的出现打破了平静。她说她是他的初恋，他们还有未了的情..."', 2900, 0);

-- 小说3的章节
INSERT INTO `chapters` (
  `novel_id`, `chapter_number`, `title`, `content`, `word_count`, `is_free`
) VALUES
(3, 1, '第一章：初入娱乐圈', '我从来没想过，自己有一天会成为明星。那次试镜，改变了我的人生轨迹...', 2540, 1),
(3, 2, '第二章：意外相遇', '拍摄现场，我第一次见到了他——陆景辰，娱乐圈的顶流。他比电视上看起来更帅，但也更冷漠...', 2690, 1),
(3, 3, '第三章：合作', '因为拍摄需要，我们成了荧幕情侣。NG了无数次后，他突然说："别紧张，就当是真的。"...', 2780, 0),
(3, 4, '第四章：绯闻', '我们的互动被拍了下来，绯闻铺天盖地。公司让我们澄清，他却说："就让他们猜吧。"...', 2650, 0),
(3, 5, '第五章：真心', '颁奖典礼上，他当众说："我想给你一个正式的身份。"全场沸腾，而我的眼泪夺眶而出...', 2840, 0);

-- 其他小说的章节类似添加...
INSERT INTO `chapters` (`novel_id`, `chapter_number`, `title`, `content`, `word_count`, `is_free`) VALUES
(4, 1, '第一章：穿越', '睁开眼，我发现自己躺在一张古色古香的床上。环顾四周，这完全不是我的房间...', 2500, 1),
(4, 2, '第二章：新身份', '原来，我穿越成了相府嫡女林清雅。而且，今天就是我和王爷成亲的日子...', 2600, 1),
(5, 1, '第一章：王府生活', '嫁入王府的第一天，我就被这里的规矩吓到了。不过，我可是现代人，才不会被这些束缚...', 2450, 1),
(5, 2, '第二章：巧手绣娘', '王府的绣娘们看不起我这个新来的王妃，我决定用现代的设计理念，让她们刮目相看...', 2550, 1),
(6, 1, '第一章：废材之名', '在修仙世界，不能修炼就是废物。而我，就是人人口中的废材...', 2480, 1),
(6, 2, '第二章：灵根觉醒', '机缘巧合下，我发现自己竟然拥有传说中的冰火双灵根！命运的齿轮开始转动...', 2580, 1),
(7, 1, '第一章：神秘患者', '诊所的门被推开，走进来一个面色苍白的年轻女子。她说，她能看见鬼...', 2520, 1),
(7, 2, '第二章：午夜来电', '深夜十二点，电话突然响起。话筒里传来诡异的声音："帮帮我..."', 2620, 1),
(8, 1, '第一章：孤岛别墅', '我收到一封神秘邀请函，邀请我参加孤岛聚会。到达时，发现还有七个人...', 2490, 1),
(8, 2, '第二章：第一个受害者', '晚宴后，第一个人死了。所有人都慌了，因为，凶手就在我们中间...', 2590, 1),
(9, 1, '第一章：开学', '高一开学第一天，我遇到了改变我人生的那群人。我们成为了最好的朋友...', 2460, 1),
(9, 2, '第二章：社团', '为了实现梦想，我们一起加入了文学社。那段追逐梦想的日子，真的很美好...', 2560, 1),
(10, 1, '第一章：转学生', '转学第一天，我就在食堂撞翻了校草的午餐。完了，要被全校女生记恨了...', 2440, 1),
(10, 2, '第二章：冤家路窄', '没想到，这个校草竟然是我的同桌！他每天用那双桃花眼看着我，到底想干嘛？...', 2540, 1);

-- ============================================
-- 5. 更新小说的章节统计
-- ============================================
UPDATE `novels` n 
SET n.chapter_count = (SELECT COUNT(*) FROM chapters c WHERE c.novel_id = n.id);

-- 更新分类的小说数量
UPDATE `categories` cat
SET cat.novel_count = (SELECT COUNT(*) FROM novels n WHERE n.category_id = cat.id);

-- ============================================
-- 完成提示
-- ============================================
SELECT '✅ 种子数据导入完成！' AS 'Status',
       (SELECT COUNT(*) FROM users) AS '用户数',
       (SELECT COUNT(*) FROM categories) AS '分类数',
       (SELECT COUNT(*) FROM novels) AS '小说数',
       (SELECT COUNT(*) FROM chapters) AS '章节数';

