-- ============================================
-- 文字之境 - 测试数据脚本
-- 版本: v1.0
-- 创建日期: 2025-10-27
-- 说明: 用于本地开发测试的模拟数据
-- ============================================

USE `ai_xsread`;

-- ============================================
-- 1. 插入测试用户 (密码统一为: password123)
-- ============================================
-- 注意: 实际使用时密码应该用 bcrypt 加密
-- 这里使用明文仅用于演示,实际项目中请使用加密后的密码

INSERT INTO `users` (`username`, `email`, `password`, `nickname`, `avatar`, `gender`, `birthday`, `bio`, `role`, `status`) VALUES
('reader001', 'reader001@example.com', '$2b$10$placeholder', '温柔读者', 'https://api.dicebear.com/7.x/avataaars/svg?seed=reader001', 1, '1995-05-20', '喜欢阅读温柔的故事', 'user', 1),
('reader002', 'reader002@example.com', '$2b$10$placeholder', '书虫小姐', 'https://api.dicebear.com/7.x/avataaars/svg?seed=reader002', 1, '1998-08-15', '每天都要看小说', 'user', 1),
('reader003', 'reader003@example.com', '$2b$10$placeholder', '追文少女', 'https://api.dicebear.com/7.x/avataaars/svg?seed=reader003', 1, '1997-03-10', '沉迷小说无法自拔', 'user', 1),
('author001', 'author001@example.com', '$2b$10$placeholder', '温柔笔触', 'https://api.dicebear.com/7.x/avataaars/svg?seed=author001', 1, '1990-06-12', '专注都市言情创作', 'author', 1),
('author002', 'author002@example.com', '$2b$10$placeholder', '墨染流年', 'https://api.dicebear.com/7.x/avataaars/svg?seed=author002', 1, '1988-09-25', '古风穿越作者', 'author', 1),
('author003', 'author003@example.com', '$2b$10$placeholder', '悬疑女王', 'https://api.dicebear.com/7.x/avataaars/svg?seed=author003', 1, '1992-11-08', '悬疑推理爱好者', 'author', 1);

-- ============================================
-- 2. 插入测试小说
-- ============================================
INSERT INTO `novels` (
  `title`, `author`, `author_id`, `category_id`, `cover`, `description`, 
  `word_count`, `chapter_count`, `status`, `views`, `likes`, `collections`, 
  `rating`, `rating_count`, `is_recommended`, `is_hot`, 
  `last_chapter_title`, `last_update_time`, `published_at`
) VALUES
-- 都市言情小说
(
  '时光里的温柔相遇',
  '温柔笔触',
  4,
  101,
  'https://picsum.photos/seed/novel1/400/600',
  '那年春天，我在图书馆的角落遇见了他。阳光透过窗棂洒在他的书页上，恰好照亮了我的心房。这是一个关于相遇、成长和爱情的温柔故事。',
  128000,
  50,
  1,
  15600,
  2300,
  890,
  4.8,
  234,
  1,
  1,
  '第五十章：未完待续',
  '2025-10-24 15:30:00',
  '2025-08-01 10:00:00'
),
(
  '咖啡馆里的小确幸',
  '温柔笔触',
  4,
  104,
  'https://picsum.photos/seed/novel2/400/600',
  '在城市的角落开了一家小咖啡馆。每天，不同的客人带来不同的故事。温暖、治愈，每一杯咖啡都是一份小确幸。',
  95000,
  38,
  0,
  12400,
  1850,
  720,
  4.9,
  189,
  1,
  0,
  '第三十八章：完结篇',
  '2025-10-20 18:00:00',
  '2025-07-15 08:00:00'
),
(
  '操场上的秘密约定',
  '青春记忆',
  NULL,
  101,
  'https://picsum.photos/seed/novel3/400/600',
  '那年夏天的操场，我们许下了秘密约定。多年后再次相遇，那份青涩的约定依然温暖着彼此的心。',
  145000,
  58,
  1,
  18200,
  2850,
  1100,
  4.7,
  312,
  0,
  1,
  '第五十八章：重逢',
  '2025-10-26 20:00:00',
  '2025-06-10 12:00:00'
),

-- 古风穿越小说
(
  '长安月下，归人未归',
  '墨染流年',
  5,
  102,
  'https://picsum.photos/seed/novel4/400/600',
  '宫墙深深，月色清冷。她站在长安城楼上，等待一个永远不会回来的人。三年了，那个许诺要回来娶她的少年郎，再无音讯。一场穿越，一段虐恋，一个关于等待和重逢的故事。',
  256000,
  100,
  1,
  32400,
  5800,
  2100,
  4.8,
  567,
  1,
  1,
  '第一百章：月下重逢',
  '2025-10-26 20:00:00',
  '2025-06-15 08:00:00'
),
(
  '穿越之凤临天下',
  '墨染流年',
  5,
  102,
  'https://picsum.photos/seed/novel5/400/600',
  '一朝穿越，成为废材嫡女。且看她如何在这古代后宫中翻云覆雨，最终凤临天下。',
  189000,
  75,
  1,
  24600,
  3800,
  1450,
  4.6,
  421,
  0,
  1,
  '第七十五章：凤凰涅槃',
  '2025-10-25 19:00:00',
  '2025-07-01 10:00:00'
),

-- 悬疑推理小说
(
  '雨夜迷雾中的真相',
  '悬疑女王',
  6,
  103,
  'https://picsum.photos/seed/novel6/400/600',
  '雨夜，老宅，消失的遗嘱。三个女人，一个秘密。当真相浮出水面，所有人都沉默了。一部烧脑的悬疑推理小说。',
  182000,
  72,
  1,
  21800,
  4100,
  1680,
  4.7,
  492,
  1,
  1,
  '第七十二章：真相大白',
  '2025-10-27 09:00:00',
  '2025-08-20 14:00:00'
),
(
  '密室逃脱游戏',
  '悬疑女王',
  6,
  103,
  'https://picsum.photos/seed/novel7/400/600',
  '六个人被困在密室中，每个人都有不可告人的秘密。要想逃出去，必须找到隐藏的真相。',
  165000,
  66,
  0,
  19500,
  3600,
  1420,
  4.6,
  388,
  0,
  0,
  '第六十六章：逃出密室',
  '2025-10-15 16:00:00',
  '2025-05-12 11:00:00'
),

-- 奇幻冒险小说
(
  '星河尽头的她',
  '幻想作家',
  NULL,
  105,
  'https://picsum.photos/seed/novel8/400/600',
  '在星河的尽头，有一座漂浮的城。传说中，那里住着一位能够实现任何愿望的女巫。少年踏上了寻找之路。',
  198000,
  79,
  1,
  28600,
  7600,
  2850,
  4.9,
  678,
  1,
  1,
  '第七十九章：星河之约',
  '2025-10-27 10:00:00',
  '2025-07-22 09:00:00'
),
(
  '魔法学院的日常',
  '幻想作家',
  NULL,
  105,
  'https://picsum.photos/seed/novel9/400/600',
  '入学魔法学院的第一天，她发现自己竟然是传说中的天选之子。从此，一段奇幻的校园生活开始了。',
  142000,
  56,
  1,
  16800,
  2900,
  1180,
  4.5,
  298,
  0,
  0,
  '第五十六章：魔法试炼',
  '2025-10-26 11:00:00',
  '2025-08-05 13:00:00'
),

-- 治愈系小说
(
  '小镇里的温暖时光',
  '治愈系作者',
  NULL,
  104,
  'https://picsum.photos/seed/novel10/400/600',
  '离开喧嚣的城市，来到小镇。在这里，时光变得缓慢而温柔。每一天都是治愈心灵的旅程。',
  112000,
  45,
  1,
  14200,
  2400,
  950,
  4.8,
  256,
  1,
  0,
  '第四十五章：春天来了',
  '2025-10-25 14:00:00',
  '2025-09-01 08:00:00'
);

-- ============================================
-- 3. 插入测试章节 (为第1本小说插入5个章节)
-- ============================================
INSERT INTO `chapters` (`novel_id`, `chapter_number`, `title`, `content`, `word_count`, `is_free`, `publish_time`) VALUES
(1, 1, '第一章：图书馆的邂逅', 
'那年春天，我在图书馆的角落遇见了他。

阳光透过窗棂洒在他的书页上，恰好照亮了我的心房。那一刻，时间仿佛静止了，整个世界都安静下来，只剩下他翻书的沙沙声和我不安分的心跳。

我假装在书架前挑选书籍，实际上余光一直偷偷观察着他。他穿着简单的白衬衫，袖口微微卷起，露出修长的手腕。侧脸的轮廓在光影中显得格外柔和，睫毛在眼睑下投下一片阴影。

"需要帮忙吗？"突然，他的声音在耳边响起。

我吓了一跳，手中的书差点掉落。原来不知何时，他已经站在了我身边，正微笑着看着我。那双眼睛清澈如水，仿佛能看透人心。

"我……我在找一本书。"我结结巴巴地说，脸颊不由自主地红了起来。

"哪一本？"他问，声音温柔得像春日的暖风。

我随口说了一个书名，心里却在疯狂地祈祷他找不到。可是命运总是爱捉弄人，他轻松地从高处的书架上取下了那本书，递到我面前。

"给。"他说，"这本书很不错，我也很喜欢。"

我接过书，手指不小心碰到了他的指尖。那一瞬间，仿佛有电流通过，让我的心跳又快了几分。

"谢谢。"我小声说。

"不客气。"他笑了笑，"我叫陆景深，经常在这里看书。以后如果需要帮忙，可以找我。"

陆景深。这个名字像一首诗，在我心里轻轻回荡。

"我叫温以南。"我也笑了，"那我们以后就是书友了。"

"书友？"他挑了挑眉，眼中闪过一丝玩味，"好啊，书友。"

那天之后，我几乎每天都会来图书馆。有时候能遇见他，有时候遇不见。但每次遇见，都像是命运特意安排的惊喜。

我们会一起讨论书中的情节，分享彼此的想法。他总是能说出我想说却说不出的话，总是能理解我那些细腻的情感。渐渐地，我发现自己越来越期待在图书馆遇见他，越来越在意他的每一个眼神、每一句话。

这是喜欢吗？我问自己。

可是我不敢确定，也不敢问。我怕这份朦胧的美好，一旦被戳破，就会消失不见。',
2580, 1, '2025-08-01 10:00:00'),

(1, 2, '第二章：意外的重逢',
'距离上次在图书馆遇见陆景深，已经过去了一周。

这一周里，我每天都会去图书馆，但都没有遇见他。我开始怀疑，那次相遇会不会只是一场美丽的巧合，从此以后，我们再也不会相见。

直到那个下雨的午后。

我没有带伞，站在图书馆门口看着外面瓢泼的大雨，不知道该怎么办。就在这时，一把伞撑在了我的头顶。

"我送你回去吧。"熟悉的声音在耳边响起。

我抬头，是陆景深。

他的头发有些湿，显然是刚从雨中跑进来的。看到我的瞬间，他微微有些喘，但笑容依旧温柔。

"你……你怎么会在这里？"我惊讶地问。

"刚好路过，看到下雨了，想起你可能没带伞。"他说得很自然，好像这是一件再正常不过的事情。

但我的心跳却快得像要跳出胸膛。他特意过来，是为了给我送伞吗？

"走吧。"他递给我伞，"你先撑着，我去开车。"

"车？"

"嗯，今天开车过来的。"

我接过伞，看着他跑进雨中的背影，心里涌起一股暖流。

五分钟后，一辆黑色的轿车停在了图书馆门口。陆景深打开副驾驶的门，对我说："上车吧。"

车里很温暖，还带着淡淡的香薰味道。我坐在副驾驶上，有些紧张，不知道该说些什么。

"你住哪里？"他问。

我报了地址，然后陷入了沉默。

车窗外雨势渐大，雨滴打在玻璃上，发出噼里啪啦的声音。车内却很安静，只有音响里轻柔的音乐在流淌。

"温以南。"他突然叫我的名字。

"嗯？"

"其实……"他顿了顿，"这一周，我也在找你。"

我愣住了，转头看向他。他的侧脸在雨幕中显得格外清晰，眼神专注地看着前方的路，但耳根却微微有些红。

"为什么？"我小声问。

"因为……"他深吸一口气，"我想再见到你。"

那一刻，整个世界都安静了。只剩下雨声，还有我砰砰跳动的心跳声。',
2450, 1, '2025-08-02 10:00:00'),

(1, 3, '第三章：雨中告白',
'车子在我家楼下停下，雨还在下。

我坐在车里，迟迟不愿下车。不是因为外面的雨，而是因为舍不得这个温暖的空间，舍不得和他在一起的时光。

"到了。"他说，声音很轻。

"嗯。"我应了一声，但依旧没有动。

车内陷入了沉默。我能听到自己的心跳，能感受到空气中微妙的紧张感。

"温以南。"他又叫了一次我的名字，这次的语气更加认真。

我转头看向他，发现他也正看着我。四目相对的瞬间，我看到了他眼中的温柔，还有一丝紧张。

"我……我有话想对你说。"他的声音有些颤抖。

"什么？"我的心跳加速了。

"我喜欢你。"

简简单单四个字，却让我的世界突然亮了起来。窗外的雨声，车内的音乐，所有的一切都模糊了，只剩下这四个字在耳边回响。

"从第一次在图书馆遇见你开始，我就喜欢你了。"他继续说，"你笑起来的样子，你认真看书的模样，你说话时的温柔，所有的一切都让我着迷。"

"这一周没有遇见你，我每天都在想你。想你在做什么，想你有没有想我，想你会不会也在图书馆等我。"

"所以今天，我特意来了。我想，如果再不说出来，我会后悔一辈子。"

他说完，紧张地看着我，等待我的回答。

我的眼泪不知什么时候流了下来。不是难过，是太开心了。开心到不知道该说什么，只能用眼泪来表达这份激动的心情。

"你……你不要哭啊。"他慌了，连忙从纸巾盒里抽出纸巾递给我，"是不是我吓到你了？对不起，我不该……"

"不是。"我打断了他的话，"我也喜欢你。"

现在轮到他愣住了。

"从第一次见面开始，我就喜欢你了。"我擦掉眼泪，对他笑了，"你的温柔，你的体贴，你的一切，都让我心动。"

"这一周，我也在等你。每天都去图书馆，每天都在想，会不会再也遇不到你了。"

"所以谢谢你，谢谢你来找我，谢谢你告诉我你的心意。"

他看着我，眼睛亮得像星星。然后，他笑了，笑得那么开心，那么满足。

"那……我可以牵你的手吗？"他问，声音里带着试探。

我伸出手，放在他的手心里。

他的手很温暖，握着我的手时很轻柔，好像怕弄疼我一样。

窗外雨声依旧，但车内已经温暖如春。

那个下雨的午后，我们在这辆车里，确认了彼此的心意。从此以后，每一个下雨天，都成为了我们美好的回忆。',
2680, 1, '2025-08-03 10:00:00'),

(1, 4, '第四章：初次约会',
'成为男女朋友的第二天，陆景深约我出去玩。

"想去哪里？"他问我。

"都可以。"我说，其实心里紧张得要命。

这是我们第一次正式约会，我不知道该穿什么，该怎么表现，该说些什么。昨天晚上，我在衣柜前站了一个小时，试了十几套衣服，最后还是选了一条简单的白色连衣裙。

早上九点，他准时出现在楼下。看到他的瞬间，我的紧张突然消失了。他穿着休闲的T恤和牛仔裤,手里拿着一束向日葵，阳光洒在他身上，整个人都在发光。

"送给你。"他把花递给我，有些不好意思，"不知道你喜欢什么花，就选了向日葵，希望你能像向日葵一样，每天都开心。"

我接过花，闻到了淡淡的清香。"很美，谢谢。"

"你今天也很美。"他说，脸微微有些红。

我们去了市郊的一个公园。那里有很大的草坪，有湖泊，还有很多树。周末的公园里人不多,显得格外安静。

我们在湖边散步，聊着天。他问我小时候的事,我问他最喜欢的书。我们发现，原来有那么多共同的话题,有那么多相似的经历。

"小时候，我经常一个人去图书馆。"他说，"父母工作忙，没时间陪我。但图书馆里有很多故事，那些故事陪我度过了很多孤独的时光。"

"所以你才那么喜欢看书？"我问。

"嗯。"他点点头，"书里的世界很美好，让我忘记了孤单。"

我握紧了他的手。"以后不会孤单了，有我陪你。"

他转头看我，眼中满是温柔。"嗯，有你就够了。"

中午，我们在公园附近找了一家小餐厅吃饭。餐厅不大,但很温馨，墙上挂着很多画，窗外能看到公园的景色。

他点了我喜欢吃的菜，倒茶时也很贴心地帮我吹凉。这些小细节，让我越来越确定，我喜欢的人，真的很好。

下午，我们去了电影院。他问我想看什么，我说都可以。最后我们选了一部爱情电影。

电影院里很暗，我们坐在最后一排。电影很好看，但我根本没有认真看，因为他的手一直握着我的手，让我的心思全都飘到了他身上。

电影结束后，天已经黑了。他送我回家，在楼下道别时，他说："今天很开心。"

"我也是。"我笑着说。

"那……明天还要再见面吗？"他有些期待地问。

"好啊。"我毫不犹豫地答应了。

他开心地笑了，然后俯身在我额头上轻轻亲了一下。"晚安，温以南。"

"晚安，陆景深。"

看着他离开的背影，我的心里满是甜蜜。这个世界上，有一个人喜欢我，而我也喜欢他，这是多么幸运的事啊。',
2890, 1, '2025-08-04 10:00:00'),

(1, 5, '第五章：被祝福的爱情',
'恋爱的日子过得很快。

一个月的时间，转眼就过去了。这一个月里，我们几乎每天都会见面。有时候是在图书馆一起看书，有时候是在咖啡厅聊天，有时候只是简单地散散步。

每一天都很平凡，但每一天都很幸福。

"你最近是不是谈恋爱了？"某天，我的室友小雅突然问我。

我愣了一下，"你怎么知道？"

"看你每天都笑得那么开心，还时不时发呆，肯定是恋爱了。"她笑着说，"说说，对方是谁？"

我犹豫了一下，还是决定告诉她。毕竟，这么好的事情，我也想和朋友分享。

"是在图书馆认识的，叫陆景深。"我说着，脸上不由自主地露出了笑容。

"陆景深？"小雅思考了一下，"该不会是商学院的那个陆景深吧？"

"你认识他？"我惊讶地问。

"当然认识，他在学校可是风云人物啊。学习好，长得帅，还是学生会副主席。很多女生都喜欢他呢。"

听到这话，我的心里突然有些不安。原来他在学校这么有名，那喜欢他的人一定很多吧。而我，只是一个普通的学生,凭什么能得到他的喜欢？

好像看出了我的心思，小雅拍了拍我的肩膀，"别多想。既然他选择了你，就说明你是特别的。而且我觉得你们很配，真的。"

"谢谢。"我对她笑了笑。

那天晚上，陆景深来找我，说要带我去见他的朋友。

"朋友？"我有些紧张。

"嗯，我最好的朋友。我想让他们认识你。"他说，眼神很认真，"你是我最重要的人，所以我想把你介绍给他们。"

听到这话，我心里的不安消失了，取而代之的是满满的甜蜜和感动。

他的朋友们都很友好，没有让我感到任何不自在。他们开玩笑说陆景深终于开窍了，还说我一定是个很特别的女孩，才能让他动心。

"她确实很特别。"陆景深看着我，眼中满是深情，"是我见过最温柔、最善良的女孩。"

那一刻，我觉得自己是世界上最幸福的人。

回家的路上，我问他："你后悔吗？选择我。"

"后悔什么？"他疑惑地看着我。

"我只是个普通人，没有你那么优秀。"我低着头说。

他停下脚步，转身面对我，认真地说："温以南，在我眼里，你就是最优秀的。你的温柔，你的善良，你的一切，都是我最珍惜的。"

"而且，爱情从来不是比较优秀，而是彼此欣赏，彼此喜欢。我喜欢你，不是因为你优秀，而是因为你是你。"

他的话像一道光，照亮了我心中所有的阴霾。

"谢谢你，陆景深。"我抱住了他。

"傻瓜，应该是我谢谢你，谢谢你出现在我的生命里。"

那个夜晚的星空很美，而在星空下拥抱的我们，更美。

我们的爱情，被朋友们祝福，被星空见证，这就是最美好的开始。',
2980, 1, '2025-08-05 10:00:00');

-- ============================================
-- 4. 为小说添加标签
-- ============================================
INSERT INTO `novel_tags` (`novel_id`, `tag_id`) VALUES
(1, 1), (1, 3), (1, 4), (1, 19),   -- 时光里的温柔相遇: 甜文, 校园, 治愈, 青春
(2, 16), (2, 4), (2, 17),           -- 咖啡馆里的小确幸: 温馨, 治愈, 搞笑
(3, 1), (3, 3), (3, 19),            -- 操场上的秘密约定: 甜文, 校园, 青春
(4, 2), (4, 6), (4, 8),             -- 长安月下,归人未归: 虐恋, 穿越, 宫斗
(5, 6), (5, 7), (5, 8),             -- 穿越之凤临天下: 穿越, 重生, 宫斗
(6, 11), (6, 12), (6, 13),          -- 雨夜迷雾中的真相: 悬疑, 推理, 探案
(7, 11), (7, 12),                   -- 密室逃脱游戏: 悬疑, 推理
(8, 15), (8, 10), (8, 18),          -- 星河尽头的她: 科幻, 修仙, 热血
(9, 16), (9, 17), (9, 20),          -- 魔法学院的日常: 温馨, 搞笑, 成长
(10, 4), (10, 16), (10, 20);        -- 小镇里的温暖时光: 治愈, 温馨, 成长

-- ============================================
-- 5. 插入书架数据 (模拟用户1的书架)
-- ============================================
INSERT INTO `bookshelf` (`user_id`, `novel_id`, `type`, `current_chapter_id`, `progress`, `reading_time`, `last_read_time`) VALUES
(1, 1, 'reading', 3, 30, 360, '2025-10-27 09:00:00'),
(1, 4, 'reading', NULL, 60, 520, '2025-10-26 20:00:00'),
(1, 6, 'reading', NULL, 25, 180, '2025-10-25 18:00:00'),
(1, 3, 'reading', NULL, 80, 640, '2025-10-24 15:00:00'),
(1, 2, 'finished', NULL, 100, 450, '2025-10-20 14:00:00'),
(1, 8, 'finished', NULL, 100, 680, '2025-10-18 16:00:00'),
(1, 1, 'collected', NULL, 30, 360, '2025-10-27 09:00:00'),
(1, 4, 'collected', NULL, 60, 520, '2025-10-26 20:00:00');

-- ============================================
-- 6. 插入阅读进度数据
-- ============================================
INSERT INTO `reading_progress` (`user_id`, `novel_id`, `chapter_id`, `progress`, `scroll_position`, `reading_time`, `last_read_time`) VALUES
(1, 1, 3, 30, 1280, 25, '2025-10-27 09:00:00'),
(1, 4, 1, 60, 2560, 45, '2025-10-26 20:00:00'),
(1, 6, 1, 25, 800, 15, '2025-10-25 18:00:00');

-- ============================================
-- 7. 插入点赞数据
-- ============================================
INSERT INTO `user_likes` (`user_id`, `novel_id`) VALUES
(1, 1),
(1, 4),
(1, 8),
(2, 1),
(2, 2),
(3, 1);

-- ============================================
-- 8. 插入评论数据
-- ============================================
INSERT INTO `comments` (`user_id`, `novel_id`, `content`, `rating`, `likes`) VALUES
(1, 1, '非常好看的小说！文笔细腻，情感真挚。每一个细节都让人感动。强烈推荐！', 5, 23),
(2, 1, '温柔的故事，温暖的文字。看完整个人都被治愈了。', 5, 15),
(3, 4, '虽然是虐文但真的很好看，剧情跌宕起伏，人物刻画也很立体。', 5, 34),
(1, 8, '科幻加爱情的设定很新颖，世界观构建得很好，期待后续！', 5, 18),
(2, 2, '治愈系神作！每次心情不好就会来看一遍，百看不厌。', 5, 21);

-- ============================================
-- 9. 插入阅读历史数据
-- ============================================
INSERT INTO `reading_history` (`user_id`, `novel_id`, `chapter_id`, `duration`, `read_time`) VALUES
(1, 1, 1, 25, '2025-10-21 20:00:00'),
(1, 1, 2, 30, '2025-10-22 19:00:00'),
(1, 1, 3, 25, '2025-10-27 09:00:00'),
(1, 4, 1, 45, '2025-10-26 20:00:00'),
(1, 2, 1, 35, '2025-10-15 18:00:00'),
(1, 8, 1, 40, '2025-10-12 16:00:00');

-- ============================================
-- 10. 更新统计数据
-- ============================================
-- 更新分类的小说数量
UPDATE `categories` c SET c.novel_count = (
  SELECT COUNT(*) FROM `novels` n WHERE n.category_id = c.id
);

-- 更新标签的使用次数
UPDATE `tags` t SET t.usage_count = (
  SELECT COUNT(*) FROM `novel_tags` nt WHERE nt.tag_id = t.id
);

-- ============================================
-- 完成提示
-- ============================================
SELECT '测试数据插入完成!' AS message;
SELECT '当前共有以下数据:' AS info;
SELECT 
  (SELECT COUNT(*) FROM users) AS '用户数',
  (SELECT COUNT(*) FROM categories) AS '分类数',
  (SELECT COUNT(*) FROM novels) AS '小说数',
  (SELECT COUNT(*) FROM chapters) AS '章节数',
  (SELECT COUNT(*) FROM tags) AS '标签数',
  (SELECT COUNT(*) FROM bookshelf) AS '书架记录数',
  (SELECT COUNT(*) FROM comments) AS '评论数';

