# 社恐测评MVP - 开发启动指南

## 🚀 快速启动

### 1. 安装依赖

在Windows系统下，打开PowerShell并导航到项目目录：

```powershell
cd H:\momo-ruanjiansheji\CS_shekong

# 安装依赖
npm install
```

### 2. 启动开发服务器

```powershell
npm run dev
```

开发服务器会自动在浏览器中打开 `http://localhost:3000`

⚠️ **重要提示**：由于配置了热加载功能，启动后不需要重复重启服务器。修改代码后会自动刷新。

### 3. 测试流程

#### 步骤1: 激活页测试

1. 访问首页 `http://localhost:3000`
2. 输入任意格式正确的激活码，例如：
   - `TEST-2024-ABCD`
   - `DEMO-1234-5678`
   - `ABCD-1234-EFGH`
3. 点击"开始测评"按钮
4. 验证通过后会自动跳转到测评页

**注意**：开发阶段任何符合 `XXXX-XXXX-XXXX` 格式（数字+大写字母）的激活码都可以通过验证。

#### 步骤2: 测评页测试

1. 在测评页完成30道题目
2. 可以点击"上一题"返回修改答案
3. 答题进度会自动保存到LocalStorage
4. 完成所有题目后点击"提交测评"
5. 等待2秒报告生成后自动跳转到报告页

**测试技巧**：
- 可以关闭浏览器标签页，再次打开会继续之前的进度
- 在浏览器开发者工具的Application > Local Storage中可以查看保存的数据

#### 步骤3: 报告页测试

1. 查看总分和等级
2. 查看六维度雷达图
3. 查看社恐类型诊断
4. 滚动查看完整的改善建议
5. 点击右上角"切换配色"按钮测试4种配色方案
6. 点击左上角"返回"可以回到测评页

### 4. 清除测试数据

如果需要重新测试完整流程，可以清除浏览器数据：

**方法1：通过浏览器开发者工具**
1. 按 `F12` 打开开发者工具
2. 进入 `Application` 标签
3. 左侧选择 `Local Storage` > `http://localhost:3000`
4. 右键选择 `Clear`

**方法2：通过浏览器控制台**
```javascript
localStorage.clear()
location.reload()
```

## 📱 测试检查清单

### 激活页功能
- [ ] 激活码输入框自动格式化（自动添加连字符）
- [ ] 激活码格式验证（正确格式才能提交）
- [ ] 验证成功后显示成功提示
- [ ] 页面切换动画流畅
- [ ] 移动端适配良好

### 测评页功能
- [ ] 显示正确的题号和进度百分比
- [ ] 进度条实时更新
- [ ] 选择选项后高亮显示
- [ ] 自动跳转到下一题（延迟0.5秒）
- [ ] "上一题"按钮正常工作
- [ ] 答案自动保存到LocalStorage
- [ ] 第10题和第20题显示进度提示
- [ ] 未完成所有题目时提交会提示
- [ ] 提交后显示loading状态

### 报告页功能
- [ ] 总分卡片显示正确
- [ ] 等级判断准确
- [ ] 百分位计算显示
- [ ] 雷达图正常渲染
- [ ] 六维度分析数据正确
- [ ] 社恐类型判断准确
- [ ] 改善建议内容完整
- [ ] 配色切换功能正常
- [ ] 切换配色后雷达图颜色同步更新
- [ ] 返回按钮正常工作

### 配色系统测试
- [ ] 雪尽霜余（浅色）- 灰茶红系
- [ ] 雪尽霜余（深色）- 暗夜雅韵
- [ ] 芩江初雪（浅色）- 翡翠绿系
- [ ] 芩江初雪（深色）- 幽林夜色
- [ ] 配色选择会保存到LocalStorage
- [ ] 刷新页面后保持选择的配色

### 响应式测试
- [ ] PC端（>768px）居中显示，最大宽度600px
- [ ] 移动端（<768px）全宽显示
- [ ] 各元素间距和字号在移动端适配良好
- [ ] 雷达图在不同屏幕尺寸下正常显示

## 🐛 常见问题

### 问题1: 依赖安装失败

**原因**：npm源速度慢或网络问题

**解决方案**：使用国内镜像

```powershell
# 临时使用淘宝镜像
npm install --registry=https://registry.npmmirror.com

# 或永久设置
npm config set registry https://registry.npmmirror.com
```

### 问题2: 开发服务器启动失败

**原因**：端口3000被占用

**解决方案1**：修改端口

编辑 `vite.config.js`：
```javascript
server: {
  port: 3001,  // 改为其他端口
  open: true
}
```

**解决方案2**：关闭占用端口的进程

```powershell
# 查找占用3000端口的进程
netstat -ano | findstr :3000

# 关闭进程（PID是上一步查到的进程号）
taskkill /PID <进程号> /F
```

### 问题3: 雷达图不显示

**原因**：ECharts未正确加载或DOM元素未准备好

**检查方法**：
1. 打开浏览器开发者工具
2. 查看Console是否有报错
3. 检查Network标签中echarts是否加载成功

**解决方案**：清除缓存并重新安装依赖
```powershell
rm -rf node_modules
npm install
```

### 问题4: 热加载不工作

**原因**：Vite热更新配置问题

**解决方案**：重启开发服务器
```powershell
# Ctrl+C 停止服务器
# 然后重新启动
npm run dev
```

### 问题5: 路由跳转失败

**原因**：路由守卫检测到未完成必要步骤

**检查**：
- 激活页 → 测评页：需要先完成激活码验证
- 测评页 → 报告页：需要先完成测评

**解决方案**：按正常流程操作，或清除LocalStorage重新开始

## 📊 数据结构说明

### LocalStorage存储的数据

**1. test_activated**（激活状态）
```
值: "true"
用途: 标记用户已通过激活码验证
```

**2. activation_code**（激活码）
```
值: "XXXX-XXXX-XXXX"
用途: 保存用户输入的激活码
```

**3. test_answers**（答题数据）
```json
{
  "answers": {
    "1": 2,
    "2": 3,
    "3": 1,
    ...
  },
  "currentQuestion": 15,
  "lastUpdate": 1699000000000
}
```

**4. test_report**（测评报告）
```json
{
  "testDate": "2025-11-03T...",
  "totalScore": 78,
  "level": { "name": "中度", "color": "#D4A574" },
  "percentile": 62,
  "type": { ... },
  "dimensions": [ ... ],
  "suggestions": { ... }
}
```

**5. preferred_color_scheme**（配色偏好）
```
值: "scheme1-light" | "scheme1-dark" | "scheme2-light" | "scheme2-dark"
用途: 保存用户选择的配色方案
```

## 🔧 开发工具推荐

### 浏览器扩展
- **Vue.js devtools**：调试Vue组件
- **JSON Viewer**：查看LocalStorage数据

### VS Code扩展
- **Volar**：Vue 3官方支持
- **ESLint**：代码规范检查
- **Prettier**：代码格式化

## 📞 技术支持

遇到问题请查看：
1. 项目README.md
2. 设计文档：`docs/04-功能开发报告/社恐最新极简MVP产品原型设计文档.md`
3. 浏览器开发者工具的Console和Network标签

---

**最后更新**: 2025年11月3日
**开发环境**: Windows 10, Node.js 16+, npm

