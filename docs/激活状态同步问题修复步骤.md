# æ¿€æ´»çŠ¶æ€åŒæ­¥é—®é¢˜ä¿®å¤æ­¥éª¤

## é—®é¢˜ç°è±¡
å¯¼èˆªæ å’Œæ±‰å ¡èœå•æ²¡æœ‰æ˜¾ç¤º"å‰©ä½™å¤©æ•° Â· ä»Šæ—¥æ¬¡æ•°"ä¿¡æ¯ã€‚

## è¯Šæ–­æ­¥éª¤

### ç¬¬1æ­¥: æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„æ§åˆ¶å°
æŒ‰ F12 æˆ–å³é”® â†’ æ£€æŸ¥ â†’ Consoleæ ‡ç­¾

### ç¬¬2æ­¥: æŸ¥çœ‹localStorageå†…å®¹
åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤:
```javascript
// æ£€æŸ¥æ˜¯å¦å·²æ¿€æ´»
console.log('å·²æ¿€æ´»?', localStorage.getItem('test_activated'))
console.log('æ¿€æ´»ç ', localStorage.getItem('activation_code'))  
console.log('è®¾å¤‡ID:', localStorage.getItem('device_id'))
console.log('æ¿€æ´»ç”¨é‡:', localStorage.getItem('activation_usage'))
```

### ç¬¬3æ­¥: æ ¹æ®ç»“æœåˆ¤æ–­

#### æƒ…å†µA: æ‰€æœ‰å€¼éƒ½æ˜¯ null
**åŸå› **: è¿˜æ²¡æœ‰æ¿€æ´»è¿‡æ¿€æ´»ç   
**è§£å†³æ–¹æ¡ˆ**:
1. è®¿é—® http://localhost:3000/activation  
2. è¾“å…¥æ¿€æ´»ç : DEMO-2024-0001
3. ç‚¹å‡»"å¼€å§‹æµ‹è¯„"

#### æƒ…å†µB: test_activated æ˜¯ 'true', ä½†æ²¡æœ‰ activation_usage
**åŸå› **: æ¿€æ´»ä¿¡æ¯ä¸å®Œæ•´  
**è§£å†³æ–¹æ¡ˆ**: åœ¨æ§åˆ¶å°è¿è¡Œ:
```javascript
// æ¸…é™¤æ—§æ•°æ®é‡æ–°æ¿€æ´»
localStorage.clear()
location.reload()
// ç„¶åå»æ¿€æ´»é¡µé‡æ–°æ¿€æ´»
```

#### æƒ…å†µC: æœ‰å®Œæ•´æ•°æ®,ä½†deviceIdä¸æ•°æ®åº“ä¸åŒ¹é…
**åŸå› **: æ•°æ®åº“ä¸­æ²¡æœ‰è¿™ä¸ªè®¾å¤‡çš„æ¿€æ´»è®°å½•  
**è§£å†³æ–¹æ¡ˆ**:
```javascript
// æŸ¥çœ‹å½“å‰deviceId
const deviceId = localStorage.getItem('device_id')
console.log('å½“å‰è®¾å¤‡ID:', deviceId)

// å»æ¿€æ´»é¡µé‡æ–°æ¿€æ´»,æˆ–è€…åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°å¯¹åº”çš„è®°å½•ID
```

### ç¬¬4æ­¥: æŸ¥çœ‹ç½‘ç»œè¯·æ±‚
1. åˆ‡æ¢åˆ° Network æ ‡ç­¾
2. ç­›é€‰: XHR
3. åˆ·æ–°é¡µé¢,æŸ¥çœ‹æ˜¯å¦æœ‰ /api/activation/status è¯·æ±‚
4. ç‚¹å‡»è¯¥è¯·æ±‚,æŸ¥çœ‹:
   - **Request Payload**: code å’Œ deviceId æ˜¯å¦æ­£ç¡®
   - **Response**: åç«¯è¿”å›ä»€ä¹ˆ

#### æœŸæœ›çš„æ­£ç¡®å“åº”:
```json
{
  "success": true,
  "daysLeft": 7,
  "remainingToday": 3,
  "expired": false,
  "dailyLimit": 3,
  "expiresAt": "2025-11-12T07:23:13.000Z",
  "totalUsage": 1
}
```

#### å¦‚æœè¿”å› error:
```json
{
  "success": false,
  "error": "å°šæœªåœ¨è¯¥è®¾å¤‡æ¿€æ´»"
}
```
è¯´æ˜å½“å‰è®¾å¤‡æ²¡æœ‰æ¿€æ´»è®°å½•,éœ€è¦é‡æ–°æ¿€æ´»ã€‚

### ç¬¬5æ­¥: æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„æ—¥å¿—:
```
[AppHeader] loadActivationStatus è°ƒç”¨, hasActivation: true
[getActivationStatus] å¼€å§‹è·å–çŠ¶æ€, code: DEMO-2024-0001
[getActivationStatus] è°ƒç”¨æœ¬åœ°åç«¯, deviceId: device_xxx
[getActivationStatus] åç«¯è¿”å›: {success: true, daysLeft: 7, ...}
[AppHeader] æ¿€æ´»çŠ¶æ€å·²æ›´æ–°: {daysLeft: 7, remainingToday: 3, ...}
```

å¦‚æœçœ‹åˆ°:
```
[AppHeader] æœªæ¿€æ´»ï¼Œè·³è¿‡çŠ¶æ€åŠ è½½
```
è¯´æ˜ checkActivation() è¿”å› false,localStorageä¸­æ²¡æœ‰ 'test_activated'

## å¿«é€Ÿä¿®å¤æ–¹æ¡ˆ

### æ–¹æ¡ˆ1: é‡æ–°æ¿€æ´»
1. è®¿é—® http://localhost:3000/activation
2. è¾“å…¥: DEMO-2024-0001
3. ç‚¹å‡»"å¼€å§‹æµ‹è¯„"
4. ç­‰å¾…è·³è½¬å,æŸ¥çœ‹å¯¼èˆªæ æ˜¯å¦æ˜¾ç¤º

### æ–¹æ¡ˆ2: æ‰‹åŠ¨è®¾ç½® (ä»…ç”¨äºè°ƒè¯•)
åœ¨æ§åˆ¶å°è¿è¡Œ:
```javascript
// è®¾ç½®æ¿€æ´»ä¿¡æ¯
localStorage.setItem('test_activated', 'true')
localStorage.setItem('activation_code', 'DEMO-2024-0001')
localStorage.setItem('activation_time', Date.now())

// è®¾ç½®è®¾å¤‡ID (ä½¿ç”¨æ•°æ®åº“ä¸­çš„æŸä¸ªID,ä¾‹å¦‚ device_1762327393934_4uwzg1uqf)
localStorage.setItem('device_id', 'device_1762327393934_4uwzg1uqf')

// è®¾ç½®æ¿€æ´»ç”¨é‡ (ä½¿ç”¨æ•°æ®åº“ä¸­çš„recordId = 2)
localStorage.setItem('activation_usage', JSON.stringify({
  code: 'DEMO-2024-0001',
  createdAt: '2025-11-05T07:23:13.000Z',
  expiresAt: '2025-11-12T07:23:13.000Z',
  dailyLimit: 3,
  usageByDate: {"2025-11-05": 1},
  recordId: 2,
  daysLeft: 7,
  remainingToday: 2,
  syncedDate: '2025-11-05',
  usageCount: 1
}))

// è§¦å‘åˆ·æ–°
window.dispatchEvent(new Event('activation-updated'))
```

ç„¶ååˆ·æ–°é¡µé¢,åº”è¯¥èƒ½çœ‹åˆ°å¯¼èˆªæ æ˜¾ç¤º"å‰©ä½™7å¤© Â· ä»Šæ—¥2/3"

## éªŒè¯ä¿®å¤

ä¿®å¤å,å¯¼èˆªæ åº”è¯¥æ˜¾ç¤º:
- **æ¡Œé¢ç«¯**: å³ä¾§æ˜¾ç¤º "ğŸ”‘ å‰©ä½™7å¤© Â· ä»Šæ—¥2/3"  
- **ç§»åŠ¨ç«¯**: æ±‰å ¡èœå•åº•éƒ¨æ˜¾ç¤º "ğŸ”‘ æ¿€æ´»ç å‰©ä½™ï¼š7å¤© Â· ä»Šæ—¥ï¼š2/3"

## å¸¸è§é—®é¢˜

### Q: ä¸ºä»€ä¹ˆåˆ·æ–°åæ¶ˆå¤±?
A: æ£€æŸ¥localStorageä¸­çš„æ•°æ®æ˜¯å¦æŒä¹…åŒ–,æˆ–è€…åç«¯APIæ˜¯å¦æ­£å¸¸è¿”å›

### Q: æ˜¾ç¤ºçš„æ¬¡æ•°ä¸å¯¹
A: æŸ¥çœ‹æ•°æ®åº“ä¸­ usage_by_date å­—æ®µ,ç¡®è®¤å½“å¤©çš„ä½¿ç”¨æ¬¡æ•°

### Q: å€’è®¡æ—¶ä¸å‡†ç¡®
A: æ£€æŸ¥ expires_at å­—æ®µæ˜¯å¦æ­£ç¡®,æ—¶åŒºæ˜¯å¦ä¸€è‡´

