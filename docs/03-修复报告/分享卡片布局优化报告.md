# 分享卡片布局优化报告

## 优化日期
2024年

## 优化内容

### 1. 雷达图尺寸优化
- **问题**：雷达图显示过大，占据过多空间
- **解决方案**：
  - 将雷达图容器高度从 300px 调整为 200px
  - 将 Canvas 尺寸从 300x300 调整为 200x200
  - 优化移动端显示：768px以下为 160x160，480px以下为 140x140
  - 添加 `overflow: hidden` 防止图表溢出

### 2. 分享弹窗布局优化（左右布局）
- **问题**：原布局为上下堆叠，不够美观，空间利用率低
- **解决方案**：
  - 将弹窗宽度从 440px 扩展到 900px（桌面端）
  - 实现左右布局：
    - **左侧**：设置区域（`.modal-settings`），固定宽度 280px
      - 背景颜色选择器
      - 卡片类型切换按钮
    - **右侧**：预览区域（`.card-preview-wrapper`），自适应宽度
      - 卡片预览显示
  - 使用 Flexbox 布局，确保响应式适配

### 3. 移动端一屏显示优化
- **问题**：移动端分享弹窗内容过多，需要滚动才能看到全部内容
- **解决方案**：
  - **768px以下（平板/大屏手机）**：
    - 布局改为上下堆叠（左侧设置在上，右侧预览在下）
    - 弹窗高度限制为 95vh，边距 2.5vh
    - 卡片缩放至 90%，确保完整显示
    - 标签页按钮改为横向排列
  - **480px以下（小屏手机）**：
    - 弹窗高度限制为 98vh，边距 1vh
    - 卡片缩放至 85%，进一步缩小
    - 优化内边距，减少空间占用
    - 雷达图进一步缩小至 140x140
    - 按钮和文字尺寸适当缩小

### 4. 样式细节优化
- 主题选择器布局优化：
  - 标签和选项分行显示
  - 使用 `.theme-selector-row` 包装，更清晰的层级结构
- 标签页按钮优化：
  - 添加 `white-space: nowrap` 防止文字换行
  - 添加 `text-align: center` 居中显示
  - 移动端改为横向排列，更符合用户习惯
- 预览区域优化：
  - 添加 `.card-preview-wrapper` 包装层，更好的布局控制
  - 预览区域居中显示，支持滚动
  - 卡片在预览区域内自适应缩放

## 技术实现

### CSS 关键改动
```css
/* 左右布局 */
.modal-body {
  display: flex;
  gap: 20px;
}

.modal-settings {
  flex: 0 0 280px; /* 固定宽度 */
}

.card-preview-wrapper {
  flex: 1; /* 自适应 */
}

/* 移动端上下布局 */
@media (max-width: 768px) {
  .modal-body {
    flex-direction: column;
  }
}
```

### JavaScript 关键改动
- HTML 结构重构，添加 `.modal-settings` 和 `.card-preview-wrapper` 容器
- 雷达图 Canvas 尺寸调整为 200x200
- ECharts 初始化尺寸同步调整

## 测试建议

1. **桌面端测试**：
   - 检查左右布局是否正确显示
   - 验证设置区域宽度是否合适
   - 确认预览区域能够完整显示卡片

2. **平板端测试（768px-1024px）**：
   - 确认布局是否切换为上下布局
   - 检查所有内容是否在一屏内显示
   - 验证卡片缩放是否合适

3. **手机端测试（≤768px）**：
   - 验证弹窗高度是否合适（95vh-98vh）
   - 检查是否需要滚动
   - 确认雷达图尺寸是否合适
   - 验证按钮和文字是否清晰可见

4. **功能测试**：
   - 切换不同主题背景
   - 切换不同类型卡片（类型卡/总分卡/雷达图）
   - 保存图片功能是否正常
   - 雷达图是否正确渲染

## 预期效果

- ✅ 桌面端：左右布局，设置和预览并排显示，空间利用率高
- ✅ 移动端：一屏显示完整，无需滚动即可看到所有内容
- ✅ 雷达图：尺寸适中，不会过大或过小
- ✅ 响应式：各种屏幕尺寸下都有良好的显示效果

## 后续优化建议

1. 考虑添加卡片预览的缩放控制（用户可手动调整大小）
2. 可以考虑添加预设模板选择
3. 优化图片生成的清晰度（特别是移动端）
