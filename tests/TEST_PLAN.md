# 测试计划

## 🎯 测试目标

全面测试"社恐程度专业测评系统"，确保：
1. 核心功能正常运行
2. 用户体验流畅
3. 数据安全可靠
4. 边界条件处理正确
5. 错误处理完善

## 📊 测试范围

### 1. 前端测试

#### 1.1 工具函数测试
- [x] **激活码工具** (`activation.js`)
  - 格式化功能
  - 验证功能
  - 边界条件处理
  
- [x] **计分系统** (`scoring.js`)
  - 分数计算
  - 等级判断
  - 类型识别
  - 维度分析
  - 报告生成
  
- [x] **Toast提示** (`toast.js`)
  - 显示提示
  - 自动消失
  - 多个提示处理

- [ ] **AI服务** (`aiService.js`)
  - API调用
  - 错误处理
  - 降级机制

#### 1.2 组件测试
- [ ] **激活页面** (`ActivationPage.vue`)
  - 激活码输入
  - 格式验证
  - 提交处理
  
- [ ] **测评页面** (`AssessmentPage.vue`)
  - 题目显示
  - 答案选择
  - 进度跟踪
  - 数据保存
  
- [ ] **报告页面** (`ReportPage.vue`)
  - 报告展示
  - 雷达图渲染
  - 主题切换
  - 分享功能

### 2. 后端测试

#### 2.1 服务测试
- [x] **激活码服务** (`activationService.js`)
  - 生成激活码
  - 验证激活码
  - 记录使用
  - 统计功能

- [ ] **AI服务** (AI API集成)
  - Claude API调用
  - 错误处理
  - 重试机制

#### 2.2 API测试
- [ ] **激活码API** (`/api/activation`)
  - POST /verify - 验证激活码
  - GET /status - 获取状态
  
- [ ] **AI分析API** (`/api/ai`)
  - POST /generate - 生成分析
  
- [ ] **管理员API** (`/api/admin`)
  - POST /login - 登录
  - GET /codes - 获取激活码列表
  - POST /codes - 创建激活码

### 3. 集成测试

- [x] **激活流程**
  - 输入 → 格式化 → 验证 → 存储
  
- [x] **测评流程**
  - 答题 → 计分 → 分析 → 报告
  
- [ ] **完整用户流程**
  - 激活 → 测评 → 查看报告

### 4. E2E测试

- [ ] **用户场景1**: 新用户首次测评
- [ ] **用户场景2**: 中断后继续测评
- [ ] **用户场景3**: 查看历史报告
- [ ] **用户场景4**: 管理员管理激活码

## 📅 测试时间表

### 第一阶段：单元测试（已完成70%）
- ✅ 激活码工具测试
- ✅ 计分系统核心测试
- ✅ Toast提示测试
- ✅ 激活码服务测试
- ⏳ AI服务测试（进行中）

### 第二阶段：组件测试（待开始）
- 📝 基础组件测试框架
- 📝 主要页面组件测试
- 📝 交互功能测试

### 第三阶段：集成测试（已完成40%）
- ✅ 激活流程测试
- ✅ 计分流程测试
- 📝 API集成测试

### 第四阶段：E2E测试（待开始）
- 📝 关键用户流程
- 📝 错误场景处理
- 📝 性能测试

## ✅ 测试用例清单

### 高优先级（P0）
- [x] 激活码格式验证
- [x] 计分算法正确性
- [x] 等级判断准确性
- [x] 类型识别准确性
- [x] 激活码生成唯一性
- [ ] API错误处理
- [ ] 数据持久化

### 中优先级（P1）
- [x] 维度分析正确性
- [x] Toast提示功能
- [ ] 主题切换
- [ ] 报告导出
- [ ] 管理员功能

### 低优先级（P2）
- [ ] 动画效果
- [ ] 响应式布局
- [ ] 浏览器兼容性
- [ ] 性能优化

## 🐛 已知问题和修复计划

### 已修复
- ✅ 激活码格式验证逻辑
- ✅ 计分系统100分制转换
- ✅ 维度分数计算

### 待修复
- ⏳ AI服务降级机制需要完善
- ⏳ 组件测试覆盖率较低
- ⏳ E2E测试环境需要搭建

## 📈 测试指标

### 当前状态
- **总体覆盖率**: ~40%
- **前端覆盖率**: ~50%
- **后端覆盖率**: ~30%
- **测试用例数**: 80+
- **通过率**: 目标100%

### 目标
- **总体覆盖率**: ≥60%
- **核心功能覆盖率**: ≥80%
- **测试用例数**: 150+
- **通过率**: 100%

## 🔄 测试流程

### 开发流程
1. 编写功能代码
2. 编写单元测试
3. 运行测试确保通过
4. 提交代码

### CI/CD流程
1. 代码推送触发测试
2. 运行所有单元测试
3. 运行集成测试
4. 生成覆盖率报告
5. 测试通过后部署

## 📝 测试报告模板

每次测试运行后应记录：
- 测试日期和时间
- 测试环境
- 测试结果总结
- 失败用例详情
- 覆盖率变化
- 性能指标

## 🚨 测试风险

### 技术风险
- AI API不稳定可能影响测试
- 数据库连接问题
- 浏览器兼容性

### 缓解措施
- 使用Mock模拟外部依赖
- 准备测试数据库
- 多浏览器测试

## 👥 测试责任人

- **单元测试**: 开发团队
- **集成测试**: 测试团队
- **E2E测试**: QA团队
- **性能测试**: 运维团队

## 📞 问题反馈

发现测试问题请：
1. 在测试文件中添加TODO注释
2. 在项目Issues中创建任务
3. 通知相关负责人
