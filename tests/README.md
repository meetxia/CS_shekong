# æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•æ¦‚è§ˆ

æœ¬é¡¹ç›®åŒ…å«å…¨é¢çš„æµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–å‰ç«¯ã€åç«¯å’Œé›†æˆæµ‹è¯•ã€‚

### æµ‹è¯•ç»“æ„

```
tests/
â”œâ”€â”€ setup.js                    # å…¨å±€æµ‹è¯•é…ç½®
â”œâ”€â”€ mockData.js                 # æµ‹è¯•ç”¨æ¨¡æ‹Ÿæ•°æ®
â”œâ”€â”€ integration/                # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ activation.integration.test.js
â”‚   â””â”€â”€ scoring.integration.test.js
â”œâ”€â”€ components/                 # ç»„ä»¶æµ‹è¯•
â”‚   â””â”€â”€ AssessmentPage.test.js
â””â”€â”€ e2e/                        # ç«¯åˆ°ç«¯æµ‹è¯•
    â””â”€â”€ userFlow.test.js

src/utils/__tests__/            # å‰ç«¯å•å…ƒæµ‹è¯•
â”œâ”€â”€ activation.test.js          # æ¿€æ´»ç å·¥å…·æµ‹è¯•
â”œâ”€â”€ scoring.test.js             # è®¡åˆ†ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ scoring.enhanced.test.js    # è®¡åˆ†ç³»ç»Ÿå¢å¼ºæµ‹è¯•
â”œâ”€â”€ aiService.test.js           # AIæœåŠ¡æµ‹è¯•
â””â”€â”€ toast.test.js               # Toastæç¤ºæµ‹è¯•

backend/__tests__/              # åç«¯å•å…ƒæµ‹è¯•
â”œâ”€â”€ activationService.test.js   # æ¿€æ´»ç æœåŠ¡æµ‹è¯•
â””â”€â”€ server.test.js              # æœåŠ¡å™¨é…ç½®æµ‹è¯•
```

## ğŸš€ è¿è¡Œæµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•
```bash
npm test
```

### è¿è¡Œå‰ç«¯æµ‹è¯•
```bash
npm test -- src/
```

### è¿è¡Œåç«¯æµ‹è¯•
```bash
npm test -- backend/
```

### è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
```bash
npm test -- src/utils/__tests__/scoring.test.js
```

### ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
```bash
npm run test:coverage
```

### ä½¿ç”¨UIç•Œé¢è¿è¡Œæµ‹è¯•
```bash
npm run test:ui
```

## ğŸ“Š æµ‹è¯•è¦†ç›–ç‡ç›®æ ‡

- **ä»£ç è¡Œè¦†ç›–ç‡**: â‰¥ 60%
- **å‡½æ•°è¦†ç›–ç‡**: â‰¥ 60%
- **åˆ†æ”¯è¦†ç›–ç‡**: â‰¥ 50%
- **è¯­å¥è¦†ç›–ç‡**: â‰¥ 60%

## ğŸ§ª æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (Unit Tests)
æµ‹è¯•ç‹¬ç«‹çš„å‡½æ•°å’Œæ¨¡å—ï¼š
- âœ… æ¿€æ´»ç æ ¼å¼åŒ–å’ŒéªŒè¯
- âœ… è®¡åˆ†ç®—æ³•
- âœ… ç­‰çº§åˆ¤æ–­
- âœ… ç±»å‹è¯†åˆ«
- âœ… Toastæç¤º
- âœ… æ¿€æ´»ç ç”Ÿæˆ

### 2. é›†æˆæµ‹è¯• (Integration Tests)
æµ‹è¯•å¤šä¸ªæ¨¡å—ååŒå·¥ä½œï¼š
- âœ… æ¿€æ´»ç å®Œæ•´æµç¨‹
- âœ… è®¡åˆ†åˆ°æŠ¥å‘Šç”Ÿæˆæµç¨‹
- âœ… ç”¨æˆ·ç”»åƒå·®å¼‚åŒ–è¯„åˆ†

### 3. ç»„ä»¶æµ‹è¯• (Component Tests)
æµ‹è¯•Vueç»„ä»¶ï¼š
- ğŸ“ æµ‹è¯„é¡µé¢ç»„ä»¶
- ğŸ“ æŠ¥å‘Šé¡µé¢ç»„ä»¶
- ğŸ“ æ¿€æ´»é¡µé¢ç»„ä»¶

### 4. E2Eæµ‹è¯• (End-to-End Tests)
æµ‹è¯•å®Œæ•´ç”¨æˆ·æµç¨‹ï¼š
- ğŸ“ å®Œæ•´æµ‹è¯„æµç¨‹
- ğŸ“ é”™è¯¯å¤„ç†
- ğŸ“ æ•°æ®æŒä¹…åŒ–

## ğŸ› ï¸ æµ‹è¯•å·¥å…·

- **Vitest**: å¿«é€Ÿçš„å•å…ƒæµ‹è¯•æ¡†æ¶
- **@vue/test-utils**: Vueç»„ä»¶æµ‹è¯•å·¥å…·
- **happy-dom**: è½»é‡çº§DOMæ¨¡æ‹Ÿç¯å¢ƒ
- **V8**: è¦†ç›–ç‡æ”¶é›†å·¥å…·

## ğŸ“ ç¼–å†™æµ‹è¯•æŒ‡å—

### æµ‹è¯•æ–‡ä»¶å‘½å
- å•å…ƒæµ‹è¯•: `*.test.js`
- é›†æˆæµ‹è¯•: `*.integration.test.js`
- E2Eæµ‹è¯•: `*.e2e.test.js`

### æµ‹è¯•ç»“æ„
```javascript
describe('åŠŸèƒ½æ¨¡å—åç§°', () => {
  describe('å­åŠŸèƒ½', () => {
    it('åº”è¯¥åšæŸä»¶äº‹', () => {
      // Arrange: å‡†å¤‡æµ‹è¯•æ•°æ®
      const input = 'test'
      
      // Act: æ‰§è¡Œè¢«æµ‹è¯•çš„åŠŸèƒ½
      const result = someFunction(input)
      
      // Assert: éªŒè¯ç»“æœ
      expect(result).toBe('expected')
    })
  })
})
```

### ä½¿ç”¨Mockæ•°æ®
```javascript
import { mockAnswers, mockBasicInfo } from '../tests/mockData.js'

it('æµ‹è¯•ç¤ºä¾‹', () => {
  const result = calculate(mockAnswers.mediumScoreAnswers)
  expect(result).toBeDefined()
})
```

## ğŸ› è°ƒè¯•æµ‹è¯•

### æŸ¥çœ‹è¯¦ç»†è¾“å‡º
```bash
npm test -- --reporter=verbose
```

### åªè¿è¡Œå¤±è´¥çš„æµ‹è¯•
```bash
npm test -- --run --reporter=verbose --bail
```

### ä½¿ç”¨è°ƒè¯•æ¨¡å¼
```bash
npm test -- --inspect-brk
```

## ğŸ“ˆ æŒç»­é›†æˆ

æµ‹è¯•ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨è¿è¡Œï¼š
- æäº¤ä»£ç å‰ (pre-commit hook)
- æ¨é€åˆ°ä»“åº“æ—¶ (CI/CD pipeline)
- åˆå¹¶è¯·æ±‚æ—¶ (Pull Request)

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

åœ¨æäº¤ä»£ç å‰ï¼Œç¡®ä¿ï¼š
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] æ–°åŠŸèƒ½æœ‰å¯¹åº”æµ‹è¯•
- [ ] æµ‹è¯•è¦†ç›–ç‡è¾¾æ ‡
- [ ] æ²¡æœ‰è·³è¿‡çš„æµ‹è¯• (skip/todo)
- [ ] æµ‹è¯•å‘½åæ¸…æ™°
- [ ] ä½¿ç”¨äº†é€‚å½“çš„æ–­è¨€

## ğŸ” å¸¸è§é—®é¢˜

### Q: æµ‹è¯•è¿è¡Œå¾ˆæ…¢ï¼Ÿ
A: ä½¿ç”¨ `--run` å‚æ•°ç¦ç”¨ç›‘å¬æ¨¡å¼ï¼Œæˆ–ä½¿ç”¨ `--threads` è°ƒæ•´å¹¶å‘æ•°ã€‚

### Q: æµ‹è¯•è¦†ç›–ç‡ä¸è¾¾æ ‡ï¼Ÿ
A: è¿è¡Œ `npm run test:coverage` æŸ¥çœ‹è¯¦ç»†æŠ¥å‘Šï¼Œé‡ç‚¹æµ‹è¯•æœªè¦†ç›–çš„åˆ†æ”¯ã€‚

### Q: Mockæ•°æ®å¦‚ä½•æ›´æ–°ï¼Ÿ
A: ç¼–è¾‘ `tests/mockData.js` æ–‡ä»¶ï¼Œæ·»åŠ æ–°çš„æµ‹è¯•æ•°æ®ã€‚

## ğŸ“š å‚è€ƒèµ„æ–™

- [Vitest æ–‡æ¡£](https://vitest.dev/)
- [Vue Test Utils æ–‡æ¡£](https://test-utils.vuejs.org/)
- [æµ‹è¯•æœ€ä½³å®è·µ](https://github.com/goldbergyoni/javascript-testing-best-practices)
