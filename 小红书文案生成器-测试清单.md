# 小红书文案生成器 - 测试清单

## 🎯 功能概述

在管理员后台新增了AI驱动的小红书文案生成器，可以：
- ✅ 通过内置提示词或自定义提示词生成文案
- ✅ 支持5种快捷模板（故事向/测评实录/干货教育/FAQ/UGC征集）
- ✅ 生成结构化内容（标题、首屏三行、正文、CTA、标签、首图建议）
- ✅ 一键复制标题、正文、标签等各部分内容
- ✅ 一键复制完整文案

## 📋 实现清单

### 后端实现 ✅
- [x] 创建 `backend/routes/xiaohongshuRoutes.js` - 文案生成API路由
- [x] 添加 `/api/admin/xiaohongshu/generate` - AI生成接口
- [x] 添加 `/api/admin/xiaohongshu/templates` - 模板列表接口
- [x] 内置完整的系统提示词（产品信息+文案要求）
- [x] 集成Claude API调用
- [x] JSON格式解析和错误处理
- [x] 在 `server.js` 中注册路由

### 前端实现 ✅
- [x] 创建 `src/views/admin/AdminXiaohongshu.vue` - 文案生成器页面
- [x] 快捷模板选择器（5个预设模板）
- [x] 自定义提示词输入框
- [x] 生成按钮和加载状态
- [x] 结果展示区（标题/首屏/正文/CTA/标签/首图建议）
- [x] 各部分独立复制按钮
- [x] 一键复制完整文案按钮
- [x] 空状态和错误提示
- [x] 响应式设计（桌面端+移动端）
- [x] 在 `router/index.js` 中添加路由
- [x] 在 `AdminLayout.vue` 中添加导航菜单（桌面端+移动端）

### 文档 ✅
- [x] 创建使用指南：`docs/02-快速启动指南/小红书文案生成器使用指南.md`
- [x] 创建测试清单：`小红书文案生成器-测试清单.md`（本文件）

## 🧪 测试步骤

### 1. 启动服务

**后端：**
```bash
cd backend
npm install  # 首次运行需要安装依赖
npm run dev  # 启动后端服务（默认端口3001）
```

**前端：**
```bash
npm install  # 首次运行需要安装依赖
npm run dev  # 启动前端服务（默认端口3000）
```

### 2. 访问后台

1. 浏览器打开 `http://localhost:3000/admin/login`
2. 使用管理员账号登录
3. 点击左侧菜单 **📝 小红书文案** 或访问 `http://localhost:3000/admin/xiaohongshu`

### 3. 测试场景

#### 场景1：使用快捷模板生成
1. 点击"故事向"模板按钮
2. 观察输入框自动填充提示词
3. 点击"✨ 生成文案"按钮
4. 等待10-30秒
5. 检查右侧是否显示生成的内容
6. 验证内容包含：标题、首屏三行、正文、CTA、标签、首图建议

#### 场景2：自定义提示词生成
1. 清空输入框或输入自定义提示词，例如：
   ```
   生成一篇关于期末考试焦虑的笔记
   面向大学生群体
   ```
2. 点击"✨ 生成文案"
3. 检查生成内容是否符合自定义要求

#### 场景3：测试复制功能
1. 生成文案后，点击"📋 复制标题"按钮
2. 粘贴到记事本，验证标题是否正确复制
3. 依次测试：复制首屏、复制正文、复制CTA、复制标签
4. 点击"📑 一键复制完整文案"
5. 粘贴到记事本，验证是否包含所有部分及标注

#### 场景4：测试错误处理
1. 关闭后端服务
2. 点击生成按钮
3. 检查是否显示友好的错误提示

#### 场景5：测试其他模板
1. 依次测试5个模板：故事向、测评实录、干货教育、FAQ、UGC征集
2. 验证每个模板生成的内容风格是否符合预期

#### 场景6：移动端测试
1. 使用浏览器开发者工具切换到移动端视图（375px宽度）
2. 检查页面布局是否正常
3. 测试模板选择、输入、生成、复制等功能

## ✅ 验收标准

### 功能性
- [ ] 能成功调用Claude API生成文案
- [ ] 生成的内容符合小红书风格（真实、接地气）
- [ ] 生成的内容包含产品核心卖点
- [ ] 标题吸引人（15-30字）
- [ ] 正文结构完整（300-500字）
- [ ] 标签相关且数量适中（8-12个）

### 用户体验
- [ ] 加载状态清晰（生成中显示提示）
- [ ] 错误提示友好（网络错误、API错误等）
- [ ] 复制功能流畅（点击后有反馈）
- [ ] 页面布局美观
- [ ] 移动端适配良好

### 技术要求
- [ ] API需要管理员认证
- [ ] 请求有超时控制（60秒）
- [ ] JSON解析健壮（支持多种格式）
- [ ] 复制功能有降级方案（不支持clipboard API时）

## 🐛 常见问题排查

### 问题1：点击生成后一直转圈
**可能原因：**
- 后端服务未启动
- Claude API Key未配置或无效
- 网络问题

**排查步骤：**
1. 检查后端控制台是否有错误日志
2. 确认 `backend/.env` 文件中 `CLAUDE_API_KEY` 已配置
3. 测试API Key是否有效：
   ```bash
   curl -X POST https://api.anthropic.com/v1/messages \
     -H "x-api-key: your_api_key" \
     -H "anthropic-version: 2023-06-01" \
     -H "content-type: application/json" \
     -d '{"model":"claude-3-5-sonnet-20241022","max_tokens":100,"messages":[{"role":"user","content":"Hello"}]}'
   ```

### 问题2：生成后显示"无法解析JSON"
**可能原因：**
- Claude API返回格式不是标准JSON
- 网络传输中断导致内容不完整

**解决方案：**
- 重新生成
- 检查后端日志中的 `rawContent` 查看原始返回

### 问题3：复制按钮无反应
**可能原因：**
- 浏览器不支持 `navigator.clipboard` API
- HTTPS/本地环境权限问题

**解决方案：**
- 代码已有降级方案（使用 `document.execCommand`）
- 如仍有问题，手动选中文本复制

### 问题4：生成的内容质量不佳
**可能原因：**
- 系统提示词不够详细
- 用户提示词表述不清

**优化建议：**
- 编辑 `backend/routes/xiaohongshuRoutes.js` 中的 `SYSTEM_PROMPT`
- 使用更具体的自定义提示词

## 📊 生成示例

### 示例1：故事向文案

**标题：** 原来我不是"内向"，是"脑内彩排型社恐"｜5分钟测了个大实话

**首屏三行：**
- 开会前我把要说的话在脑子里彩排了10遍
- 真到我说的时候还是脸红结巴，回家一路反刍
- 测完才知道，这叫"社交反刍+预期焦虑"

**标签：** #社恐 #社交焦虑 #社交反刍 #预期焦虑 #心理测评 #自我评估 #自我成长 #职场新人

## 🚀 部署注意事项

### 生产环境配置

1. **确保API Key安全**
   ```bash
   # backend/.env
   CLAUDE_API_KEY=your_production_api_key
   CLAUDE_API_URL=https://api.anthropic.com/v1/messages
   ```

2. **配置CORS**
   - 确保后端允许前端域名跨域请求

3. **调整超时时间**
   - 生产环境可能需要更长的超时时间（60-90秒）

4. **监控API用量**
   - Claude API按token计费，建议监控每日用量

5. **添加访问日志**
   - 记录谁在什么时间生成了什么类型的文案

## 📝 后续优化建议

- [ ] 添加生成历史记录功能
- [ ] 支持批量生成（一次生成多篇）
- [ ] 添加文案评分系统（预测爆款概率）
- [ ] 支持导出为Markdown/PDF
- [ ] 集成数据分析（哪些文案类型最受欢迎）
- [ ] 添加文案模板库（用户可保存自己的模板）

---

## ✅ 最终检查

**开发完成日期：** 2025-11-11  
**开发者：** Cascade AI  
**测试状态：** ⏳ 待测试

**快速验证命令：**
```bash
# 1. 启动后端
cd backend && npm run dev

# 2. 新终端启动前端
cd .. && npm run dev

# 3. 浏览器访问
# http://localhost:3000/admin/login
# 登录后访问 http://localhost:3000/admin/xiaohongshu
```

**测试完成签字：**
- [ ] 后端API测试通过
- [ ] 前端页面测试通过
- [ ] 复制功能测试通过
- [ ] 移动端测试通过
- [ ] 错误处理测试通过

---

🎉 **功能开发完成！请按照本清单进行测试验收。**
